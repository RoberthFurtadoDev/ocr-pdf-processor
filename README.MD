# üöÄ Processador Ass√≠ncrono de Documentos com OCR na Nuvem

## üéØ Objetivo do Projeto

Este projeto demonstra a constru√ß√£o de um sistema backend robusto, escal√°vel e 100% cloud-native, projetado para resolver um desafio de neg√≥cio real: a extra√ß√£o de texto de documentos PDF de forma ass√≠ncrona. A solu√ß√£o utiliza uma arquitetura moderna, orientada a eventos, para garantir alta performance e resili√™ncia, mesmo sob alta carga de trabalho.

## üí° O Problema de Neg√≥cio

Empresas de diversos setores (financeiro, sa√∫de, jur√≠dico) lidam com um volume massivo de documentos n√£o estruturados, como faturas, contratos e formul√°rios. Extrair informa√ß√µes valiosas desses arquivos manualmente √© um processo lento, caro e sujeito a erros.

Este projeto automatiza essa tarefa, criando um pipeline de dados que:

* Recebe um documento PDF via API REST.
* Processa o arquivo em segundo plano, sem impactar a experi√™ncia do usu√°rio.
* Utiliza Intelig√™ncia Artificial para realizar o Reconhecimento √ìptico de Caracteres (OCR).
* Armazena o texto extra√≠do de forma estruturada em um banco de dados, pronto para ser consultado, indexado ou analisado.

## üèóÔ∏è Arquitetura da Solu√ß√£o

A espinha dorsal do projeto √© uma arquitetura orientada a eventos e totalmente desacoplada, orquestrando diferentes servi√ßos da AWS para criar um fluxo de trabalho resiliente.

### Fluxo do Processamento:
![Fluxo de Processamento do PDF](src/main/resources/assets/fluxo-processamento.svg)

## üõ†Ô∏è Decis√µes T√©cnicas

* **Java com Spring Boot**: pela robustez, ecossistema maduro e facilidade de criar APIs REST.
* **Amazon SQS**: desacopla o recebimento do arquivo do seu processamento.
* **Amazon S3**: armazenamento de objetos confi√°vel e barato.
* **Amazon Textract**: servi√ßo de OCR gerenciado e altamente preciso.
* **Pivot de Tesseract para Textract**: migra√ß√£o estrat√©gica para IA gerenciada e mais confi√°vel.

## üíª Tecnologias Utilizadas

| Tecnologia          | Descri√ß√£o                                                              | Vers√£o (se aplic√°vel) |
| ------------------- | ---------------------------------------------------------------------- | --------------------- |
| **Java**            | Linguagem de programa√ß√£o principal.                                    | 17                    |
| **Spring Boot**     | Framework para cria√ß√£o de APIs REST de forma r√°pida e eficiente.       | 3.x                   |
| **Spring Data JPA** | Facilita a persist√™ncia de dados e a comunica√ß√£o com o banco.          | 3.x                   |
| **PostgreSQL**      | Sistema de gerenciamento de banco de dados relacional.                 | 16 ou superior        |
| **Amazon S3**       | Servi√ßo de armazenamento de objetos para os arquivos PDF.              | N/A                   |
| **Amazon SQS**      | Servi√ßo de fila de mensagens para o processamento ass√≠ncrono.          | N/A                   |
| **Amazon Textract** | Servi√ßo de IA para extra√ß√£o de texto (OCR) de alta precis√£o.           | N/A                   |
| **Lombok**          | Biblioteca para reduzir o c√≥digo boilerplate (getters, setters, etc.). | 1.18.30               |
| **Maven**           | Ferramenta de automa√ß√£o de build e gerenciamento de depend√™ncias.      | 3.8+                  |
| **IntelliJ IDEA**   | Ambiente de Desenvolvimento Integrado (IDE).                           | Community Edition     |
| **Postman**         | Ferramenta para testar os endpoints da API.                            | N/A                   |
| **Git & GitHub**    | Sistema de controle de vers√£o.                                         | N/A                   |

## ‚öôÔ∏è Como Executar o Projeto

### ‚úÖ Pr√©-requisitos

* Java (JDK 17)
* Maven 3.8+
* Conta na AWS com as credenciais configuradas via AWS CLI (`aws configure`)
* PostgreSQL instalado e rodando

### üöÄ Passos para Configura√ß√£o

1. **Clone o reposit√≥rio**:

```bash
git clone https://github.com/seu-usuario/ocr-pdf-processor.git
```

2. **Configure o `application.properties`**:

* Localize: `src/main/resources/application.properties`
* Atualize as propriedades:

    * `spring.datasource.url`
    * `spring.datasource.username`
    * `spring.datasource.password`
    * `spring.cloud.aws.credentials.access-key`
    * `spring.cloud.aws.credentials.secret-key`
    * `app.aws.s3.bucket-name`

3. **Crie os Recursos na AWS**:

* Bucket no **Amazon S3**
* Fila padr√£o no **Amazon SQS**
* Conceda permiss√µes IAM: `AmazonS3FullAccess`, `AmazonSQSFullAccess`, `AmazonTextractFullAccess`

4. **Crie o Banco de Dados**:

* Crie o schema com o nome definido em `spring.datasource.url`

5. **Execute a Aplica√ß√£o**:

* Rode a classe `OcrPdfProcessorApplication.java`
* O Hibernate criar√° automaticamente a tabela `processamentos_pdf`

## üîå Endpoints da API

### 1. Upload de PDF

Inicia o processo de extra√ß√£o de texto de um arquivo PDF.

* **URL**: `/api/pdf/upload`
* **M√©todo**: `POST`
* **Body**: `form-data`

    * `file` ‚Üí (Selecionar arquivo PDF)

#### ‚úÖ Exemplo de Resposta:

```json
{
  "idProcessamento": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
  "status": "AGUARDANDO",
  "mensagem": "Arquivo recebido. O processamento foi iniciado."
}
```

### 2. Consultar Status do Processamento

Verifica o status atual de um trabalho de processamento.

* **URL**: `/api/pdf/status/{id}`
* **M√©todo**: `GET`

#### üîÅ Exemplo de Resposta (Processando):

```json
{
  "idProcessamento": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
  "status": "PROCESSANDO"
}
```

#### ‚úÖ Exemplo de Resposta (Conclu√≠do):

```json
{
  "idProcessamento": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
  "status": "CONCLUIDO",
  "textoExtraido": "Este √© o texto completo que foi extra√≠do do seu documento PDF..."
}
```

#### ‚ùå Exemplo de Erro (404):

```json
{
  "mensagem": "ID de processamento n√£o encontrado."
}
```

---
> Documenta√ß√£o da API com Swagger (OpenAPI 3): http://localhost:8081/swagger-ui.html
